<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="it.q02.asocp.database.TicketRollDAO">

    <resultMap id="ticketRoll" type="it.q02.asocp.modules.base.client.data.TicketRoll">
        <id property="id" column="id"/>
        <result property="firstTicketNumber" column="first_ticket_number"/>
        <result property="firstTicketSeries" column="first_ticket_series"/>
        <result property="color" column="color"/>
        <result property="ticketCount" column="ticket_count"/>
        <result property="createDate" column="create_date"/>
        <result property="owner" column="owner"/>
    </resultMap>

    <insert id="create" parameterType="it.q02.asocp.modules.base.client.data.TicketRoll" keyProperty="id" keyColumn="id" useGeneratedKeys="true" flushCache="true">
        INSERT INTO ticket_roll(first_ticket_number,first_ticket_series,ticket_count,color,create_date,owner) values (#{firstTicketNumber},#{firstTicketSeries},#{ticketCount},#{color},now(),#{owner});
    </insert>

    <update id="update" parameterType="it.q02.asocp.modules.base.client.data.TicketRoll"  flushCache="true">
        UPDATE ticket_roll SET
                              first_ticket_number=#{firstTicketNumber},
                              first_ticket_series=#{firstTicketSeries},
                              ticket_count=#{ticketCount},
                              color=#{color}
                            WHERE id = #{id}
    </update>

    <select id="find" resultMap="ticketRoll">
        SELECT * from ticket_roll order by id;
    </select>

    <select id="getUniqueColors" resultType="java.lang.String">
       select  distinct  color from ticket_roll;
    </select>

</mapper>